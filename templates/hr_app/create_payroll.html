{% extends 'hr_app/base.html' %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title mb-0">
                        {% if employee %}Create Payroll for {{ employee }}{% else %}Create New Payroll{% endif %}
                    </h3>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        
                        <div class="row">
                            {% if not employee %}
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.employee.id_for_label }}" class="form-label">Employee</label>
                                {{ form.employee }}
                                {% if form.employee.errors %}
                                    <div class="text-danger">{{ form.employee.errors }}</div>
                                {% endif %}
                            </div>
                            {% endif %}
                            
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.month.id_for_label }}" class="form-label">Month</label>
                                {{ form.month }}
                                {% if form.month.errors %}
                                    <div class="text-danger">{{ form.month.errors }}</div>
                                {% endif %}
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.year.id_for_label }}" class="form-label">Year</label>
                                {{ form.year }}
                                {% if form.year.errors %}
                                    <div class="text-danger">{{ form.year.errors }}</div>
                                {% endif %}
                            </div>
                        </div>

                        <h5 class="mt-4 mb-3">Salary Details</h5>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.basic_salary.id_for_label }}" class="form-label">Basic Salary</label>
                                {{ form.basic_salary }}
                                {% if form.basic_salary.errors %}
                                    <div class="text-danger">{{ form.basic_salary.errors }}</div>
                                {% endif %}
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.house_rent_allowance.id_for_label }}" class="form-label">House Rent Allowance</label>
                                {{ form.house_rent_allowance }}
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.travel_allowance.id_for_label }}" class="form-label">Travel Allowance</label>
                                {{ form.travel_allowance }}
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.medical_allowance.id_for_label }}" class="form-label">Medical Allowance</label>
                                {{ form.medical_allowance }}
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.special_allowance.id_for_label }}" class="form-label">Special Allowance</label>
                                {{ form.special_allowance }}
                            </div>
                        </div>

                        <h5 class="mt-4 mb-3">Overtime & Deductions</h5>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.overtime_hours.id_for_label }}" class="form-label">Overtime Hours</label>
                                {{ form.overtime_hours }}
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.overtime_rate.id_for_label }}" class="form-label">Overtime Rate</label>
                                {{ form.overtime_rate }}
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.professional_tax.id_for_label }}" class="form-label">Professional Tax</label>
                                {{ form.professional_tax }}
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.income_tax.id_for_label }}" class="form-label">Income Tax</label>
                                {{ form.income_tax }}
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.other_deductions.id_for_label }}" class="form-label">Other Deductions</label>
                                {{ form.other_deductions }}
                            </div>
                        </div>

                        <h5 class="mt-4 mb-3">Payment Status</h5>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="form-check">
                                    {{ form.paid }}
                                    <label for="{{ form.paid.id_for_label }}" class="form-check-label">Mark as Paid</label>
                                </div>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.payment_date.id_for_label }}" class="form-label">Payment Date</label>
                                {{ form.payment_date }}
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                            <a href="{% url 'manage_payroll' %}" class="btn btn-secondary me-md-2">Cancel</a>
                            <button type="submit" class="btn btn-primary">Create Payroll</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    input[type="number"] {
        text-align: right;
    }
    .form-label {
        font-weight: 500;
    }
</style>
{% endblock %}